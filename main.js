(()=>{"use strict";var e={144:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(537),o=t.n(n),a=t(645),i=t.n(a)()(o());i.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap);"]),i.push([e.id,'*{margin:0;padding:0;box-sizing:border-box}body{font-family:"Noto Sans",sans-serif}header{padding:1rem;text-align:center;font-size:1.5rem;color:#0077b6}main{padding:1rem;text-align:center}.container{display:flex;justify-content:space-between;max-width:1000px;margin:0 auto}.grid{display:grid;grid-template:repeat(11, 40.5px)/repeat(11, 40.5px);justify-items:center;align-items:center}.grid .board{grid-row:2/-1;grid-column:2/-1;display:grid;grid-template:repeat(10, 40px)/repeat(10, 40px);border:3px solid #0077b8}.grid .board.disabled{pointer-events:none}.grid .board .cell{border:1px solid #b8e6ff}.grid .board .cell.hovered{background:#0098eb}.grid .board .cell.shipped{background:#999}.grid .board .cell.missed{background:#0098eb !important}.grid .board .cell.hitted{background:#ed6a5e !important}.grid .board .cell.sunked{background:#ef253c !important}.grid .board .cell.computer{cursor:pointer}.grid .board .cell.computer:hover{background:#81b687}.grid .coord{color:#0077b8;user-select:none}.name{margin:.5rem 0 0 0;font-size:1.3rem;transform:translateX(20px)}.button{margin:2rem 0 0 0;padding:.6rem 1.7rem;font-size:1.8rem;border:none;border-radius:10px;color:#fff;background:#0077b6;box-shadow:2px 2px 0 1px #023e8a;transition:box-shadow .1s ease;cursor:pointer;text-align:center}.button:active{box-shadow:.5px .5px 0 .5px #023e8a}.ships{max-width:400px;padding:.5rem;margin:1.5rem auto;border:3px solid #0098eb}.ships .title{font-size:1.8rem;color:#0077b6;margin:0 0 1rem 0}.ships-container{display:flex;flex-wrap:wrap;gap:.5rem .7rem}.ships .ship{height:40px;background:#999;border-radius:5px 30px 30px 5px;cursor:move !important}.ships .ship[data-length="2"]{width:80px}.ships .ship[data-length="3"]{width:120px}.ships .ship[data-length="4"]{width:160px}.ships .ship[data-length="5"]{width:200px}.popup-body{width:100vw;height:100vh;position:absolute;top:0;background:rgba(0,0,0,.3);display:flex;justify-content:center;align-items:center;visibility:hidden}.popup-body.active{visibility:visible}.popup-body.active .popup{transform:scale(1)}.popup-body .popup{padding:3rem 6rem;background:#fff;border-radius:15px;color:#0077b8;transition:transform .3s ease;transform:scale(0)}.popup-body .popup .title{font-size:3rem;margin:0 0 3rem 0}.popup-body .popup .button{font-size:2.5rem}',"",{version:3,sources:["webpack://./src/styles/main.scss"],names:[],mappings:"AAKA,EACE,QAAA,CACA,SAAA,CACA,qBAAA,CAEF,KACE,kCARU,CAWZ,OACE,YAAA,CACA,iBAAA,CACA,gBAAA,CACA,aAAA,CAGF,KACE,YAAA,CACA,iBAAA,CAEF,WACE,YAAA,CACA,6BAAA,CACA,gBAAA,CACA,aAAA,CAEF,MACE,YAAA,CACA,mDAAA,CACA,oBAAA,CACA,kBAAA,CACA,aACE,aAAA,CACA,gBAAA,CACA,YAAA,CACA,+CAAA,CACA,wBAAA,CACA,sBACE,mBAAA,CAEF,mBACE,wBAAA,CACA,2BACE,kBAAA,CAEF,2BACE,eAAA,CAEF,0BACE,6BAAA,CAEF,0BACE,6BAAA,CAEF,0BACE,6BAAA,CAEF,4BACE,cAAA,CACA,kCACE,kBAAA,CAKR,aACE,aAAA,CACA,gBAAA,CAGJ,MACE,kBAAA,CACA,gBAAA,CACA,0BAAA,CAEF,QACE,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,WAAA,CACA,kBAAA,CACA,UAAA,CACA,kBAAA,CACA,gCAAA,CACA,8BAAA,CACA,cAAA,CACA,iBAAA,CACA,eACE,mCAAA,CAGJ,OACE,eAAA,CACA,aAAA,CACA,kBAAA,CACA,wBAAA,CACA,cACE,gBAAA,CACA,aAAA,CACA,iBAAA,CAEF,iBACE,YAAA,CACA,cAAA,CACA,eAAA,CAEF,aACE,WAAA,CACA,eAAA,CACA,+BAAA,CACA,sBAAA,CACA,8BACE,UAAA,CAEF,8BACE,WAAA,CAEF,8BACE,WAAA,CAEF,8BACE,WAAA,CAKN,YACE,WAAA,CACA,YAAA,CACA,iBAAA,CACA,KAAA,CACA,yBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,iBAAA,CACA,mBACE,kBAAA,CACA,0BACE,kBAAA,CAGJ,mBACE,iBAAA,CACA,eAAA,CACA,kBAAA,CACA,aAAA,CACA,6BAAA,CACA,kBAAA,CACA,0BACE,cAAA,CACA,iBAAA,CAEF,2BACE,gBAAA",sourcesContent:["// General\r\n@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap');\r\n\r\n$base-font: 'Noto Sans', sans-serif;\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\nbody {\r\n  font-family: $base-font;\r\n}\r\n// Header\r\nheader {\r\n  padding: 1rem;\r\n  text-align: center;\r\n  font-size: 1.5rem;\r\n  color: #0077b6;\r\n}\r\n// Main\r\nmain {\r\n  padding: 1rem;\r\n  text-align: center;\r\n}\r\n.container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n.grid {\r\n  display: grid;\r\n  grid-template: repeat(11, 40.5px) / repeat(11, 40.5px);\r\n  justify-items: center;\r\n  align-items: center;\r\n  .board {\r\n    grid-row: 2 / -1;\r\n    grid-column: 2 / -1;\r\n    display: grid;\r\n    grid-template: repeat(10, 40px) / repeat(10, 40px);\r\n    border: 3px solid hsl(201, 100%, 36%);\r\n    &.disabled {\r\n      pointer-events: none;\r\n    }\r\n    .cell {\r\n      border: 1px solid hsl(201, 100%, 86%);\r\n      &.hovered {\r\n        background: hsl(201, 100%, 46%);\r\n      }\r\n      &.shipped {\r\n        background: #999;\r\n      }\r\n      &.missed {\r\n        background: hsl(201, 100%, 46%) !important;\r\n      }\r\n      &.hitted {\r\n        background: hsl(5, 80%, 65%) !important;\r\n      }\r\n      &.sunked {\r\n        background: hsl(353, 86%, 54%) !important;\r\n      }\r\n      &.computer {\r\n        cursor: pointer;\r\n        &:hover {\r\n          background: hsl(127, 27%, 61%);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .coord {\r\n    color: hsl(201, 100%, 36%);\r\n    user-select: none;\r\n  }\r\n}\r\n.name {\r\n  margin: 0.5rem 0 0 0;\r\n  font-size: 1.3rem;\r\n  transform: translateX(20px);\r\n}\r\n.button {\r\n  margin: 2rem 0 0 0;\r\n  padding: 0.6rem 1.7rem;\r\n  font-size: 1.8rem;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: #fff;\r\n  background: #0077b6;\r\n  box-shadow: 2px 2px 0 1px #023e8a;\r\n  transition: box-shadow 0.1s ease;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  &:active {\r\n    box-shadow: 0.5px 0.5px 0 0.5px #023e8a;\r\n  }\r\n}\r\n.ships {\r\n  max-width: 400px;\r\n  padding: 0.5rem;\r\n  margin: 1.5rem auto;\r\n  border: 3px solid hsl(201, 100%, 46%);\r\n  .title {\r\n    font-size: 1.8rem;\r\n    color: #0077b6;\r\n    margin: 0 0 1rem 0;\r\n  }\r\n  &-container {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 0.5rem 0.7rem;\r\n  }\r\n  .ship {\r\n    height: 40px;\r\n    background: #999;\r\n    border-radius: 5px 30px 30px 5px;\r\n    cursor: move !important;\r\n    &[data-length='2'] {\r\n      width: 80px;\r\n    }\r\n    &[data-length='3'] {\r\n      width: 120px;\r\n    }\r\n    &[data-length='4'] {\r\n      width: 160px;\r\n    }\r\n    &[data-length='5'] {\r\n      width: 200px;\r\n    }\r\n  }\r\n}\r\n// Popup\r\n.popup-body {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  position: absolute;\r\n  top: 0;\r\n  background: hsla(0, 0%, 0%, 0.3);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  visibility: hidden;\r\n  &.active {\r\n    visibility: visible;\r\n    .popup {\r\n      transform: scale(1);\r\n    }\r\n  }\r\n  .popup {\r\n    padding: 3rem 6rem;\r\n    background: #fff;\r\n    border-radius: 15px;\r\n    color: hsl(201, 100%, 36%);\r\n    transition: transform 0.3s ease;\r\n    transform: scale(0);\r\n    .title {\r\n      font-size: 3rem;\r\n      margin: 0 0 3rem 0;\r\n    }\r\n    .button {\r\n      font-size: 2.5rem;\r\n    }\r\n  }\r\n}\r\n"],sourceRoot:""}]);const s=i},645:e=>{e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var t="",n=void 0!==r[5];return r[4]&&(t+="@supports (".concat(r[4],") {")),r[2]&&(t+="@media ".concat(r[2]," {")),n&&(t+="@layer".concat(r[5].length>0?" ".concat(r[5]):""," {")),t+=e(r),n&&(t+="}"),r[2]&&(t+="}"),r[4]&&(t+="}"),t})).join("")},r.i=function(e,t,n,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var s=0;s<this.length;s++){var A=this[s][0];null!=A&&(i[A]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&i[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),r.push(c))}},r}},537:e=>{e.exports=function(e){var r=e[1],t=e[3];if(!t)return r;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),a="/*# ".concat(o," */"),i=t.sources.map((function(e){return"/*# sourceURL=".concat(t.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([a]).join("\n")}return[r].join("\n")}},379:e=>{var r=[];function t(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function n(e,n){for(var a={},i=[],s=0;s<e.length;s++){var A=e[s],d=n.base?A[0]+n.base:A[0],c=a[d]||0,l="".concat(d," ").concat(c);a[d]=c+1;var p=t(l),u={css:A[1],media:A[2],sourceMap:A[3],supports:A[4],layer:A[5]};if(-1!==p)r[p].references++,r[p].updater(u);else{var C=o(u,n);n.byIndex=s,r.splice(s,0,{identifier:l,updater:C,references:1})}i.push(l)}return i}function o(e,r){var t=r.domAPI(r);return t.update(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap&&r.supports===e.supports&&r.layer===e.layer)return;t.update(e=r)}else t.remove()}}e.exports=function(e,o){var a=n(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=t(a[i]);r[s].references--}for(var A=n(e,o),d=0;d<a.length;d++){var c=t(a[d]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}a=A}}},569:e=>{var r={};e.exports=function(e,t){var n=function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}},216:e=>{e.exports=function(e){var r=document.createElement("style");return e.setAttributes(r,e.attributes),e.insert(r,e.options),r}},565:(e,r,t)=>{e.exports=function(e){var r=t.nc;r&&e.setAttribute("nonce",r)}},795:e=>{e.exports=function(e){var r=e.insertStyleElement(e);return{update:function(t){!function(e,r,t){var n="";t.supports&&(n+="@supports (".concat(t.supports,") {")),t.media&&(n+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(n+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),n+=t.css,o&&(n+="}"),t.media&&(n+="}"),t.supports&&(n+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),r.styleTagTransform(n,e,r.options)}(r,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)}}}},589:e=>{e.exports=function(e,r){if(r.styleSheet)r.styleSheet.cssText=e;else{for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(document.createTextNode(e))}}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={id:n,exports:{}};return e[n](a,a.exports,t),a.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.nc=void 0,(()=>{var e=t(379),r=t.n(e),n=t(795),o=t.n(n),a=t(569),i=t.n(a),s=t(565),A=t.n(s),d=t(216),c=t.n(d),l=t(589),p=t.n(l),u=t(144),C={};C.styleTagTransform=p(),C.setAttributes=A(),C.insert=i().bind(null,"head"),C.domAPI=o(),C.insertStyleElement=c(),r()(u.Z,C),u.Z&&u.Z.locals&&u.Z.locals;const h=class{constructor(e){this.name=e}},m=class{constructor(){this.ships=[],this.filledCells=[],this.hittedCells=[]}placeShip(e,r,t=!1){const n=new class{constructor(e,r,t){this.length=e,this.isRotated=t,this.coordinates=this.calculateCords(r),this.sunk=!1}calculateCords(e){const r={};let t=+e[0],n=+e[1];for(let e=0;e<this.length;e++)this.isRotated?r[[t,n+e]]=!1:r[[t+e,n]]=!1;return r}hit(e){this.coordinates[e]=!0}isSunk(){let e=!0;for(let r of Object.values(this.coordinates))if(!r){e=!1;break}return e}}(e,r,t);if(+r[n.isRotated?1:0]+ +e>11)return!1;if(!this.canPlaceShip(n.coordinates))return!1;this.ships.push(n);for(const e of Object.keys(n.coordinates))this.filledCells.push(e);return!0}canPlaceShip(e){for(const r of Object.keys(e))if(-1!=this.filledCells.indexOf(r))return!1;return!0}receiveAttack(e){if(!this.checkCell)return;let r;const t=this.ships.some((t=>{for(let n of Object.keys(t.coordinates))if(n==e)return r=t,!0;return!1}));return t&&(r.hit(e),r.isSunk()&&(r.sunk=!0)),this.hittedCells.push({[e]:t}),[t,r]}checkCell(e){return this.hittedCells.includes(e)}isAllShipsSunk(){return this.ships.every((e=>e.sunk))}},f=(e,r,t,n)=>{const o=Object.keys(e),a=document.querySelector("[data-"+r+'] [data-coords="'+o+'"]');if(e[o]){if(a.classList.add("hitted"),n.isSunk()){const e=Object.keys(n.coordinates);for(let t=0;t<n.length;t++){const n=document.querySelector("[data-"+r+'] [data-coords="'+e[t]+'"]');n.classList.remove("hitted"),n.classList.add("sunked")}t.isAllShipsSunk()&&F("computer"===r?"Player":"Computer")}}else a.classList.add("missed")},g=document.querySelector("#start-btn"),b=document.querySelector("#restart-btn");g.addEventListener("click",(()=>{if(document.querySelector(".ships-container").children.length>0)return;const e=document.querySelector(".ships"),r=document.querySelector(".board.disabled");e.style.display="none",r.style.pointerEvents="all"})),b.addEventListener("click",(()=>{document.querySelector(".popup-body").classList.remove("active"),j()}));const v=(e,r,t)=>{const n=r.receiveAttack(e)[1];f(r.hittedCells.slice(-1)[0],t,r,n)};let y=[];const x=(e,r)=>{const t=Math.floor(Math.random()*(y.length-1)),n=y.splice(t,1),o=e.receiveAttack(n)[1];f(e.hittedCells.slice(-1)[0],r,e,o)},E=document.querySelectorAll(".board")[0],B=document.querySelectorAll(".board")[1],k=()=>{E.innerHTML="",B.innerHTML="";for(let e=1;e<=10;e++)for(let r=1;r<=10;r++){const t=document.createElement("div");t.classList.add("cell","player"),t.setAttribute("data-coords",[r,e]),E.appendChild(t)}for(let e=1;e<=10;e++)for(let r=1;r<=10;r++){const t=document.createElement("div");t.classList.add("cell","computer"),t.setAttribute("data-coords",[r,e]),B.appendChild(t),t.addEventListener("click",(()=>{v([r,e],S,"computer"),x(w,"player")}),{once:!0})}(()=>{const e=document.querySelectorAll(".cell.player"),r=document.querySelector(".ships-container");let t;document.querySelectorAll(".ship").forEach((e=>e.addEventListener("mousedown",(()=>t=e)))),e.forEach((e=>{e.addEventListener("dragenter",(()=>e.classList.add("hovered"))),e.addEventListener("dragleave",(()=>e.classList.remove("hovered"))),e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(()=>{if(!w.placeShip(t.getAttribute("data-length"),e.getAttribute("data-coords").split(",")))return void e.classList.remove("hovered");r.removeChild(t),e.classList.remove("hovered"),e.classList.add("shipped");const n=w.ships.slice(-1)[0],o=Object.keys(n.coordinates);for(let e=0;e<n.length;e++)document.querySelector('[data-player] [data-coords="'+o[e]+'"]').classList.add("shipped")}))}))})()};new h("player"),new h("computer");let w=new m,S=new m;const L=document.querySelector(".popup-body"),q=L.querySelector(".title"),j=()=>{const e=document.querySelector(".ships"),r=e.querySelector(".ships-container"),t=document.querySelector("[data-computer]");e.style.display="block",t.style.pointerEvents="none",r.innerHTML='\n    <div data-length="5" class="ship" draggable="true"></div>\n    <div data-length="4" class="ship" draggable="true"></div>\n    <div data-length="3" class="ship" draggable="true"></div>\n    <div data-length="3" class="ship" draggable="true"></div>\n    <div data-length="2" class="ship" draggable="true"></div>\n  ',w=new m,S=new m,k(),(()=>{y=[];for(let e=1;e<=10;e++)for(let r=1;r<=10;r++)y.push([r,e])})(),S.placeShip(2,[8,2]),S.placeShip(3,[3,1]),S.placeShip(3,[4,3],!0),S.placeShip(4,[2,7]),S.placeShip(5,[8,5],!0)},F=e=>{console.log(w),setTimeout((()=>{L.classList.add("active"),q.textContent=e+" won!"}),500)};j()})()})();
//# sourceMappingURL=main.js.map